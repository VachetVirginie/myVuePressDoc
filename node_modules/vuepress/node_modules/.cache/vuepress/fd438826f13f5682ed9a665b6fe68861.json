{"remainingRequest":"/Users/vivi./Dev/myVuePressDoc/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/vivi./Dev/myVuePressDoc/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/vivi./Dev/myVuePressDoc/docs/vue/busevenementglobal.md?vue&type=template&id=28b128d2&","dependencies":[{"path":"/Users/vivi./Dev/myVuePressDoc/docs/vue/busevenementglobal.md","mtime":1637153748735},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/cache-loader/dist/cjs.js","mtime":1660115262090},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/cache-loader/dist/cjs.js","mtime":1660115262090},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/babel-loader/lib/index.js","mtime":1660115261629},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1660115262578},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/cache-loader/dist/cjs.js","mtime":1660115262090},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/vue-loader/lib/index.js","mtime":1660115262578},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1660115261540}],"contextDependencies":[],"result":["\n<div class=\"content\"><h3 id=\"introduction\"><a class=\"header-anchor\" href=\"#introduction\" aria-hidden=\"true\">#</a> introduction</h3>\n<p>Le modèle de bus d'événements / publication-abonnement est un moyen de faire communiquer entre elles des sections non liées de votre application.</p>\n<p>Le <a href=\"https://www-digitalocean-com.translate.goog/community/tutorials/vuejs-events?_x_tr_sl=auto&amp;_x_tr_tl=fr&amp;_x_tr_hl=fr&amp;_x_tr_pto=nui\" target=\"_blank\" rel=\"noopener noreferrer\">système d'événements utilisé dans les composants Vue<OutboundLink/></a> peut être utilisé dans un modèle de bus d'événements / publication-abonnement.</p>\n<p><strong>Remarque :</strong> ce didacticiel est spécifique à Vue 2. Dans Vue 3, <a href=\"https://translate.google.com/website?sl=auto&amp;tl=fr&amp;nui=1&amp;u=https://v3.vuejs.org/guide/migration/events-api.html%23_3-x-update\" target=\"_blank\" rel=\"noopener noreferrer\"><code>$on</code>, <code>$off</code>, et <code>$once</code>ont été supprimés<OutboundLink/></a> . Les bibliothèques externes qui fournissent cette fonctionnalité sont <a href=\"https://translate.google.com/website?sl=auto&amp;tl=fr&amp;nui=1&amp;u=https://v3.vuejs.org/guide/migration/events-api.html%23migration-strategy\" target=\"_blank\" rel=\"noopener noreferrer\">recommandées<OutboundLink/></a> .</p>\n<p>Dans cet article, vous appliquerez le puissant bus d'événements intégré de Vue.</p>\n<h2 id=\"conditions-prealables\"><a class=\"header-anchor\" href=\"#conditions-prealables\" aria-hidden=\"true\">#</a> Conditions préalables</h2>\n<p>Pour terminer ce tutoriel, vous aurez besoin de :</p>\n<ul>\n<li>Node.js installé localement, ce que vous pouvez faire en suivant <a href=\"https://www-digitalocean-com.translate.goog/community/tutorial_series/how-to-install-node-js-and-create-a-local-development-environment?_x_tr_sl=auto&amp;_x_tr_tl=fr&amp;_x_tr_hl=fr&amp;_x_tr_pto=nui\" target=\"_blank\" rel=\"noopener noreferrer\">Comment installer Node.js et créer un environnement de développement local<OutboundLink/></a> .</li>\n<li>Une certaine familiarité avec la <a href=\"https://translate.google.com/website?sl=auto&amp;tl=fr&amp;nui=1&amp;u=https://vuejs.org/v2/guide/installation.html\" target=\"_blank\" rel=\"noopener noreferrer\">configuration d'un projet Vue.js<OutboundLink/></a> et l' <a href=\"https://translate.google.com/website?sl=auto&amp;tl=fr&amp;nui=1&amp;u=https://vuejs.org/v2/guide/%23Composing-with-Components\" target=\"_blank\" rel=\"noopener noreferrer\">utilisation des composants Vue.js<OutboundLink/></a> peut être bénéfique.</li>\n</ul>\n<p>Ce didacticiel a été vérifié avec Node v15.3.0, <code>npm</code>v6.14.9 et <code>vue</code>v2.6.11.</p>\n<h2 id=\"etape-1-configuration-du-projet\"><a class=\"header-anchor\" href=\"#etape-1-configuration-du-projet\" aria-hidden=\"true\">#</a> Étape 1 - Configuration du projet</h2>\n<p>Pour les besoins de ce didacticiel, vous allez construire à partir d'un projet Vue par défaut généré avec <code>@vue/cli</code>.</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>\n npx @vue/cli create vue-event-bus-example --default\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>Cela configurera un nouveau projet Vue avec les configurations par défaut : <code>Vue 2</code>, <code>babel</code>, <code>eslint</code>.</p>\n<p>Accédez au répertoire du projet nouvellement créé :</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>\n cd vue-event-bus-example\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>Vous devrez créer le bus d'événements et l'exporter quelque part afin que d'autres modules et composants puissent l'utiliser. Tout d'abord, créez un nouveau fichier. Importez la bibliothèque Vue. Ensuite, exportez-en une instance.</p>\n<p>src/event-bus.js</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>import Vue from &#39;vue&#39;;\nexport const EventBus = new Vue();\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>Pour ce tutoriel, l'instance a été définie sur la variable <code>EventBus</code>.</p>\n<p>Ce que vous obtenez essentiellement est un composant entièrement découplé du DOM ou du reste de votre application. Tout ce qui existe dessus, ce sont ses méthodes d'instance.</p>\n<p>Maintenant que vous avez créé le bus d'événements, vous devez l'importer dans vos composants et appeler les mêmes méthodes que vous utiliseriez si vous passiez des messages entre les composants parent et enfant.</p>\n<p>Ensuite, appliquons <code>EventBus.$emit()</code>.</p>\n<h2 id=\"etape-2-envoi-d-evenements\"><a class=\"header-anchor\" href=\"#etape-2-envoi-d-evenements\" aria-hidden=\"true\">#</a> Étape 2 - Envoi d'événements</h2>\n<p>Considérez un scénario avec un composant qui notifie à l'ensemble de l'application le nombre de fois où il a été cliqué chaque fois que quelqu'un clique dessus.</p>\n<p><strong>Remarque :</strong> cet exemple utilise ici un <a href=\"https://translate.google.com/website?sl=auto&amp;tl=fr&amp;nui=1&amp;u=https://vuejs.org/v2/guide/single-file-components.html\" target=\"_blank\" rel=\"noopener noreferrer\">composant à fichier unique<OutboundLink/></a> , mais vous pouvez utiliser la méthode de création de composants que vous souhaitez.</p>\n<p>Voici comment vous procéderiez pour implémenter cela en utilisant<code>EventBus.$emit(channel: string, payload1: any, ...)</code> :</p>\n<p>src/components/ClickCountButton.vue</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>&lt;template&gt;\n  &lt;button @click=&quot;emitGlobalClickEvent()&quot;&gt;{{ clickCount }}&lt;/button&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport { EventBus } from &#39;@/event-bus&#39;;\n\nexport default {\n  data() {\n    return {\n      clickCount: 0\n    }\n  },\n\n  methods: {\n    emitGlobalClickEvent() {\n      this.clickCount++;\n      EventBus.$emit(&#39;clicked&#39;, this.clickCount);\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>Ce code produit un bouton. Cliquer sur le bouton enverrait l'événement sur un canal ( <code>clicked</code>) avec une charge utile ( <code>clickCount</code>).</p>\n<p>Modifiez <code>App.vue</code>pour utiliser ce composant.</p>\n<p>src/App.vue</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>&lt;template&gt;\n  &lt;div id=&quot;app&quot;&gt;\n    &lt;ClickCountButton&gt;&lt;/ClickCountButton&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ClickCountButton from &#39;./components/ClickCountButton&#39;\n\nexport default {\n  name: &#39;App&#39;,\n  components: {\n    ClickCountButton\n  }\n}\n&lt;/script&gt;\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>Ensuite, appliquons <code>EventBus.$on</code>.</p>\n<h2 id=\"etape-3-reception-d-evenements\"><a class=\"header-anchor\" href=\"#etape-3-reception-d-evenements\" aria-hidden=\"true\">#</a> Étape 3 - Réception d'événements</h2>\n<p>Désormais, toute autre partie de votre application peut importer le bus d'événements et écouter sur le <code>clicked</code>canal à l'aide de <code>EventBus.$on(channel: string, callback(payload1,...))</code>.</p>\n<p>Appliquez ceci à votre application en modifiant <code>App.vue</code>:</p>\n<p>src/App.vue</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>&lt;script&gt;\nimport { EventBus } from &#39;./event-bus&#39;;\nimport ClickCountButton from &#39;./components/ClickCountButton&#39;\n\nexport default {\n  name: &#39;App&#39;,\n  components: {\n    ClickCountButton\n  }\n}\n\nconst clickHandler = function(clickCount) {\n  console.log(`The button has been clicked ${clickCount} times!`)\n}\n\nEventBus.$on(&#39;clicked&#39;, clickHandler);\n&lt;/script&gt;\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>Ce code crée un écouteur d'événement <code>clicked</code>et enregistre un message sur la console avec le nombre de fois où le bouton a été cliqué.</p>\n<p><strong>Remarque :</strong> si vous souhaitez uniquement écouter la première émission d'un événement, vous pouvez utiliser <code>EventBus.$once(channel: string, callback(payload1,...))</code>.</p>\n<p>Ensuite, appliquons <code>EventBus.$off</code>.</p>\n<h2 id=\"etape-4-suppression-des-ecouteurs-d-evenement\"><a class=\"header-anchor\" href=\"#etape-4-suppression-des-ecouteurs-d-evenement\" aria-hidden=\"true\">#</a> Étape 4 - Suppression des écouteurs d'événement</h2>\n<p>Vous pouvez désinscrire le gestionnaire du <code>clicked</code>canal en utilisant <code>EventBus.$off(channel: string, callback(payload1,...))</code>.</p>\n<p>Appliquez ceci à votre application en modifiant <code>App.vue</code>:</p>\n<p>src/App.vue</p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code>&lt;script&gt;\nimport { EventBus } from &#39;./event-bus&#39;;\nimport ClickCountButton from &#39;./components/ClickCountButton&#39;\n\nexport default {\n  name: &#39;App&#39;,\n  components: {\n    ClickCountButton\n  }\n}\n\nconst clickHandler = function(clickCount) {\n  console.log(`The button has been clicked ${clickCount} times!`)\n}\n\nEventBus.$on(&#39;clicked&#39;, clickHandler);\n\nEventBus.$off(&#39;clicked&#39;, clickHandler);\n&lt;/script&gt;\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>En fournissant un événement et un rappel, <code>EventBus.$off</code>ne supprimera que l'écouteur pour ce rappel spécifique.</p>\n<p><strong>Remarque :</strong> vous pouvez également supprimer tous les écouteurs pour un événement particulier en utilisant <code>EventBus.$off('clicked')</code>sans argument de rappel.</p>\n<p>Et si vous avez vraiment besoin de supprimer chaque écouteur de <code>EventBus</code>, quel que soit le canal, vous pouvez appeler <code>EventBus.$off()</code>sans aucun argument.</p>\n<p>Maintenant, vous avez utilisé <code>.$emit</code>, <code>.$on</code>, et <code>.$off</code>.</p>\n<h2 id=\"conclusion\"><a class=\"header-anchor\" href=\"#conclusion\" aria-hidden=\"true\">#</a> Conclusion</h2>\n<p>Dans ce didacticiel, vous avez utilisé le puissant bus d'événements intégré de Vue pour écouter un <code>clicked</code>événement et enregistrer un message avec le nombre de clics. Ceci a été réalisé en utilisant <code>.$emit</code>, <code>.$on</code>, et <code>.$off</code>.</p>\n</div>\n",null]}