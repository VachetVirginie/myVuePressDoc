{"remainingRequest":"/Users/vivi./Dev/myVuePressDoc/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/vivi./Dev/myVuePressDoc/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/vivi./Dev/myVuePressDoc/docs/git/bonnespratiques.md?vue&type=template&id=6a9f7115&","dependencies":[{"path":"/Users/vivi./Dev/myVuePressDoc/docs/git/bonnespratiques.md","mtime":1631613175240},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/cache-loader/dist/cjs.js","mtime":1660115262090},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/cache-loader/dist/cjs.js","mtime":1660115262090},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/babel-loader/lib/index.js","mtime":1660115261629},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1660115262578},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/cache-loader/dist/cjs.js","mtime":1660115262090},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/vue-loader/lib/index.js","mtime":1660115262578},{"path":"/Users/vivi./Dev/myVuePressDoc/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1660115261540}],"contextDependencies":[],"result":["\n<div class=\"content\"><h1 id=\"bonnes-pratiques\"><a class=\"header-anchor\" href=\"#bonnes-pratiques\" aria-hidden=\"true\">#</a> Bonnes pratiques</h1>\n<h2 id=\"nommer-les-branches\"><a class=\"header-anchor\" href=\"#nommer-les-branches\" aria-hidden=\"true\">#</a> Nommer les branches</h2>\n<p>En dehors des branches <strong>develop</strong> et <strong>master</strong>, comment nommer nos autres branches ?</p>\n<p>Rien de bien sorcier, nous allons simplement indiquer le type de la branche suivi du nom de celle-ci, optionnellement nous pouvons ajouter le numéro du ticket. Le tout doit être séparé par le caractère slash &quot;/&quot; :</p>\n<p><type>/<name>/&lt;issue_ID&gt;</p>\n<p>|</p>\n<p>1</p>\n<p>|</p>\n<p><type>/<name>/&lt;issue_ID&gt;</p>\n<p>|</p>\n<h3 id=\"les-types-de-branches\"><a class=\"header-anchor\" href=\"#les-types-de-branches\" aria-hidden=\"true\">#</a> Les types de branches</h3>\n<p>Le type d'une branche doit être clair afin de comprendre le but de celle-ci. Voici une liste non exhaustive des types de branches :</p>\n<ul>\n<li><strong>feature</strong>: Ajout d'une nouvelle fonctionnalité;</li>\n<li><strong>bugfix</strong>: Correction d'un bug;</li>\n<li><strong>hotfix</strong>: Correction d'un bug critique;</li>\n<li><strong>chore</strong>: Nettoyage du code;</li>\n<li><strong>experiment</strong>: Expérimentation de fonctionnalités.</li>\n</ul>\n<h3 id=\"le-nom-de-la-branche\"><a class=\"header-anchor\" href=\"#le-nom-de-la-branche\" aria-hidden=\"true\">#</a> Le nom de la branche</h3>\n<p>Le nom de la branche décrit succinctement le but de celle-ci. Certaines règles doivent être respectées :</p>\n<ul>\n<li>Le nom doit faire moins de 50 caractères;</li>\n<li>Le nom doit respecter la convention kebab-case (les mots doivent être en minuscule et liés par des tirets &quot;-&quot;);</li>\n</ul>\n<h3 id=\"le-numero-de-ticket\"><a class=\"header-anchor\" href=\"#le-numero-de-ticket\" aria-hidden=\"true\">#</a> Le numéro de ticket</h3>\n<p>Pour le suivi de vos tickets, que ce soit sur <a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Github<OutboundLink/></a>, <a href=\"https://about.gitlab.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Gitlab<OutboundLink/></a> ou tout autre outil comme <a href=\"https://www.atlassian.com/fr/software/jira\" target=\"_blank\" rel=\"noopener noreferrer\">JIRA<OutboundLink/></a> par exemple, il peut être utile d'ajouter le numéro de ceux-ci dans le nom de vos branches. Il est ainsi possible par exemple de fermer automatiquement vos tickets lorsque la branche sera &quot;merger&quot;.</p>\n<h3 id=\"quelques-exemples\"><a class=\"header-anchor\" href=\"#quelques-exemples\" aria-hidden=\"true\">#</a> Quelques exemples</h3>\n<p>Voyons quelques exemples de noms de branches pour mieux comprendre :</p>\n<p>feature/add-users-controller hotfix/profile-page-error/621 experiment/try-api-key chore/remove-deprecated-method/924</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>6</p>\n<p>7</p>\n<p>|</p>\n<p>feature/add-users-controller</p>\n<p>hotfix/profile-page-error/621</p>\n<p>experiment/try-api-key</p>\n<p>chore/remove-deprecated-method/924</p>\n<p>|</p>\n<h2 id=\"nommer-les-messages-de-commits\"><a class=\"header-anchor\" href=\"#nommer-les-messages-de-commits\" aria-hidden=\"true\">#</a> Nommer les messages de commits</h2>\n<p>Le message d'un commit doit être clair et concis, il doit indiquer ce qui a été modifié et la raison de cette modification. La convention de nommage la plus utilisée est la &quot;<a href=\"https://www.conventionalcommits.org/en/v1.0.0/\" target=\"_blank\" rel=\"noopener noreferrer\">Conventional Commits<OutboundLink/></a>&quot;.</p>\n<p>L'avantage de respecter cette convention, outre le fait de rendre plus compréhensibles vos commits, est de permettre de respecter la sémantique de versions (<a href=\"https://semver.org/\" target=\"_blank\" rel=\"noopener noreferrer\">SemVer<OutboundLink/></a>) et d'automatiser certaines tâches (comme la génération d'un fichier Changelog par exemple).</p>\n<h3 id=\"format-des-messages\"><a class=\"header-anchor\" href=\"#format-des-messages\" aria-hidden=\"true\">#</a> Format des messages</h3>\n<p>Le format du message est le suivant :</p>\n<p><type>(<scope>): <subject> <BLANK LINE> <body> <BLANK LINE> <footer></p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>|</p>\n<p><type>(<scope>): <subject></p>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n<p>|</p>\n<p>Voyons plus en détail chacune des parties du message.</p>\n<h4 id=\"le-type\"><a class=\"header-anchor\" href=\"#le-type\" aria-hidden=\"true\">#</a> Le type</h4>\n<p>Le type du commit décrit l'origine du changement. Il peut prendre différentes valeurs :</p>\n<ul>\n<li><strong>feat</strong>: Ajout d'une nouvelle fonctionnalité;</li>\n<li><strong>fix</strong>: Correction d'un bug;</li>\n<li><strong>build</strong>: Changement lié au système de build ou qui concerne les dépendances (npm, grunt, gulp, webpack, etc.).</li>\n<li><strong>ci</strong>: Changement concernant le système d'intégration et de déploiement continu (Jenkins, Travis, Ansible, gitlabCI, etc.)</li>\n<li><strong>docs</strong>: Ajout ou modification de documentation (README, JSdoc, etc.);</li>\n<li><strong>perf</strong>: Amélioration des performances;</li>\n<li><strong>refactor</strong>: Modification n'ajoutant pas de fonctionnalités ni de correction de bug (renommage d'une variable, suppression de code redondant, simplification du code, etc.);</li>\n<li><strong>style</strong>: Changement lié au style du code (indentation, point virgule, etc.);</li>\n<li><strong>test</strong>: Ajout ou modification de tests;</li>\n<li><strong>revert</strong>: Annulation d'un précédent commit;</li>\n<li><strong>chore</strong>: Toute autre modification (mise à jour de version par exemple).</li>\n</ul>\n<p>Pour chacun des types, vous pouvez également utiliser un système d'emoji comme <a href=\"https://gitmoji.carloscuesta.me/\" target=\"_blank\" rel=\"noopener noreferrer\">gitmoji<OutboundLink/></a>.</p>\n<h4 id=\"le-scope\"><a class=\"header-anchor\" href=\"#le-scope\" aria-hidden=\"true\">#</a> Le scope</h4>\n<p>Cet élément facultatif indique simplement le contexte du commit. Il s'agit des composants de notre projet, voici une liste non exhaustive :</p>\n<ul>\n<li>controller;</li>\n<li>route;</li>\n<li>middleware;</li>\n<li>view;</li>\n<li>config;</li>\n<li>service;</li>\n<li>etc.</li>\n</ul>\n<h4 id=\"le-sujet\"><a class=\"header-anchor\" href=\"#le-sujet\" aria-hidden=\"true\">#</a> Le sujet</h4>\n<p>Le sujet décrit succinctement la modification. Certaines règles doivent être respectées :</p>\n<ul>\n<li>Le sujet doit faire moins de 50 caractères;</li>\n<li>Les verbes doivent être à l'impératif (add, update, change, remove, etc.);</li>\n<li>La première lettre ne doit pas être en majuscule;</li>\n<li>Le sujet ne doit pas se terminer par un point.</li>\n</ul>\n<h4 id=\"le-corps-du-message\"><a class=\"header-anchor\" href=\"#le-corps-du-message\" aria-hidden=\"true\">#</a> Le corps du message</h4>\n<p>Le corps du message, qui est optionnel, doit contenir les raisons de la modification ou tout simplement donner plus détails sur le commit. Il peut également indiquer les changements importants (breaking changes). Celui-ci doit faire moins de 100 caractères.</p>\n<h4 id=\"le-footer\"><a class=\"header-anchor\" href=\"#le-footer\" aria-hidden=\"true\">#</a> Le footer</h4>\n<p>Le footer est également facultatif, celui-ci est surtout utilisé pour faire référence aux tickets (issue) de Github ou Gitlab par exemple que le commit règle ou aux changements importants (breaking changes). Celui-ci doit faire moins de 100 caractères.</p>\n<h4 id=\"quelques-exemples-2\"><a class=\"header-anchor\" href=\"#quelques-exemples-2\" aria-hidden=\"true\">#</a> Quelques exemples</h4>\n<p>Nous allons voir quelques exemples pour mieux comprendre. Les messages des commits qui vont suivre seront en anglais, mais le principe est exactement le même si vous écrivez vos messages de commit en français.</p>\n<h5 id=\"commit-simple-sans-corps-ni-footer\"><a class=\"header-anchor\" href=\"#commit-simple-sans-corps-ni-footer\" aria-hidden=\"true\">#</a> Commit simple (sans corps ni footer)</h5>\n<p>feat(controller): add post's controller</p>\n<p>|</p>\n<p>1</p>\n<p>|</p>\n<p>feat(controller): add post's controller</p>\n<p>|</p>\n<p>docs(route): add swagger documentation</p>\n<p>|</p>\n<p>1</p>\n<p>|</p>\n<p>docs(route): add swagger documentation</p>\n<p>|</p>\n<h5 id=\"commit-avec-un-corps\"><a class=\"header-anchor\" href=\"#commit-avec-un-corps\" aria-hidden=\"true\">#</a> commit avec un corps</h5>\n<p>fix(controller): use the correct HTTP code Use the HTTP error 403 instead of 401 if the user is authenticated.</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>|</p>\n<p>fix(controller): use the correct HTTP code</p>\n<p>Use the HTTP error 403 instead of 401 if the user is authenticated.</p>\n<p>|</p>\n<h5 id=\"commit-complet-corps-et-footer\"><a class=\"header-anchor\" href=\"#commit-complet-corps-et-footer\" aria-hidden=\"true\">#</a> commit complet (corps et footer)</h5>\n<p>refactor(repository): remove deprecated method BREAKING CHANGE: findById and findByPrimary methods have been removed. Closes #78</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>|</p>\n<p>refactor(repository): remove deprecated method</p>\n<p>BREAKING CHANGE: findById and findByPrimary methods have been removed.</p>\n<p>Closes #78</p>\n<p>|</p>\n<h3 id=\"comment-respecter-la-convention\"><a class=\"header-anchor\" href=\"#comment-respecter-la-convention\" aria-hidden=\"true\">#</a> Comment respecter la convention ?</h3>\n<p>Afin de nous assurer du respect de la convention, nous allons utiliser les hooks de Git. Pour faire simple, les hooks permettent d'effectuer certaines actions lorsqu'un événement spécifique se produit (par exemple un commit, un pull, un merge, etc.). Le souci des hooks est leurs partages avec l'ensemble de l'équipe. Pour faciliter l'ajout et le partage de ceux-ci, nous allons utiliser la librairie <a href=\"https://www.npmjs.com/package/husky\" target=\"_blank\" rel=\"noopener noreferrer\">husky<OutboundLink/></a> :</p>\n<p>npm install husky --save-dev</p>\n<p>|</p>\n<p>1</p>\n<p>|</p>\n<p>npm install husky --save-dev</p>\n<p>|</p>\n<p>Il y a énormément de choses intéressantes à faire avec cette librairie, on en reparlera d'ailleurs dans un prochain article.</p>\n<p>Pour notre cas ce qui nous intéresse c'est de s'assurer du respect de la convention, nous allons pour cela installer la librairie <a href=\"https://commitlint.js.org/#/reference-cli\" target=\"_blank\" rel=\"noopener noreferrer\">commitlint<OutboundLink/></a> et la configuration de notre convention:</p>\n<p>npm install @commitlint/cli @commitlint/config-conventional --save-dev</p>\n<p>|</p>\n<p>1</p>\n<p>|</p>\n<p>npm install @commitlint/cli @commitlint/config-conventional --save-dev</p>\n<p>|</p>\n<p>Créons ensuite un fichier <code>commitlint.config.js</code> pour indiquer que nous souhaitons utiliser la convention &quot;<a href=\"https://www.conventionalcommits.org/en/v1.0.0/\" target=\"_blank\" rel=\"noopener noreferrer\">Conventional Commits<OutboundLink/></a>&quot; :</p>\n<p>module.exports = { extends: ['@commitlint/config-conventional'] };</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>|</p>\n<p>module.exports  =  {</p>\n<p>extends:  ['@commitlint/config-conventional']</p>\n<p>};</p>\n<p>|</p>\n<p>Ajoutons maintenant notre hook Git via <a href=\"https://www.npmjs.com/package/husky\" target=\"_blank\" rel=\"noopener noreferrer\">husky<OutboundLink/></a> directement dans notre fichier <code>package.json</code> :</p>\n<p>{ /* ...*/ &quot;husky&quot;: { &quot;hooks&quot;: { &quot;commit-msg&quot;: &quot;commitlint -E HUSKY_GIT_PARAMS&quot; } } }</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>6</p>\n<p>7</p>\n<p>8</p>\n<p>|</p>\n<p>{</p>\n<p>/* ...*/</p>\n<p>&quot;husky&quot;:  {</p>\n<pre><code>&quot;hooks&quot;:  {\n\n  &quot;commit-msg&quot;:  &quot;commitlint -E HUSKY_GIT_PARAMS&quot;\n\n}\n</code></pre>\n<p>}</p>\n<p>}</p>\n<p>|</p>\n<p>Testons pour s'assurer que cela fonctionne :</p>\n<p>git commit -m &quot;this commit will fail&quot; husky &gt; commit-msg (node v13.12.0) ⧗ input: this commit will fail ✖ subject may not be empty [subject-empty] ✖ type may not be empty [type-empty] ✖ found 2 problems, 0 warnings ⓘ Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint husky &gt; commit-msg hook failed (add --no-verify to bypass)</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>6</p>\n<p>7</p>\n<p>8</p>\n<p>9</p>\n<p>10</p>\n<p>|</p>\n<p>git commit -m &quot;this commit will fail&quot;</p>\n<p>husky &gt; commit-msg (node v13.12.0)</p>\n<p>⧗   input: this commit will fail</p>\n<p>✖   subject may not be empty [subject-empty]</p>\n<p>✖   type may not be empty [type-empty]</p>\n<p>✖   found 2 problems, 0 warnings</p>\n<p>ⓘ   Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint</p>\n<p>husky &gt; commit-msg hook failed (add --no-verify to bypass)</p>\n<p>|</p>\n<p>Et voilà ! Impossible de commit si le message ne respecte pas la convention.</p>\n<h3 id=\"automatisation\"><a class=\"header-anchor\" href=\"#automatisation\" aria-hidden=\"true\">#</a> Automatisation</h3>\n<p>Respecter cette convention de commit permet également d'automatiser certaines tâches comme la génération d'un fichier changelog ou encore de mettre à jour le numéro de version en respectant la sémantique <a href=\"https://semver.org/\" target=\"_blank\" rel=\"noopener noreferrer\">SemVer<OutboundLink/></a>.</p>\n<p>Pour cela rien de plus simple, il suffit d'installer la librairie <a href=\"https://www.npmjs.com/package/standard-version\" target=\"_blank\" rel=\"noopener noreferrer\"><code>standard-version</code> :<OutboundLink/></a></p>\n<p>npm install standard-version --save-dev</p>\n<p>|</p>\n<p>1</p>\n<p>|</p>\n<p>npm install standard-version --save-dev</p>\n<p>|</p>\n<p>Et d'ajouter une commande dans le fichier <code>package.json</code> :</p>\n<p>{ /<em>...</em>/, &quot;scripts&quot;: { &quot;release&quot;: &quot;standard-version&quot; } }</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>6</p>\n<p>|</p>\n<p>{</p>\n<p>/<em>...</em>/,</p>\n<p>&quot;scripts&quot;:  {</p>\n<pre><code>&quot;release&quot;:  &quot;standard-version&quot;\n</code></pre>\n<p>}</p>\n<p>}</p>\n<p>|</p>\n<p>Il ne reste plus qu'à lancer cette commande via <code>npm run release</code>.</p>\n<p>npm run release &gt; standard-version √ bumping version in package.json from 1.0.0 to 1.0.1 √ bumping version in package-lock.json from 1.0.0 to 1.0.1 √ created CHANGELOG.md √ outputting changes to CHANGELOG.md √ committing package-lock.json and package.json and CHANGELOG.md √ tagging release v1.0.1 i Run <code>git push --follow-tags origin master &amp;&amp; npm publish</code> to publish</p>\n<p>|</p>\n<p>1</p>\n<p>2</p>\n<p>3</p>\n<p>4</p>\n<p>5</p>\n<p>6</p>\n<p>7</p>\n<p>8</p>\n<p>9</p>\n<p>|</p>\n<p>npm run release</p>\n<blockquote>\n<p>standard-version</p>\n</blockquote>\n<p>√ bumping version in package.json from 1.0.0 to 1.0.1</p>\n<p>√ bumping version in package-lock.json from 1.0.0 to 1.0.1</p>\n<p>√ created CHANGELOG.md</p>\n<p>√ outputting changes to CHANGELOG.md</p>\n<p>√ committing package-lock.json and package.json and CHANGELOG.md</p>\n<p>√ tagging release v1.0.1</p>\n<p>i Run <code>git push --follow-tags origin master &amp;&amp; npm publish</code> to publish</p>\n<p>|</p>\n<p>Et c'est tout ! Cette commande effectue les tâches suivantes :</p>\n<ul>\n<li>Incrémentation du numéro de version dans le fichier <code>package.json</code> et <code>package-lock.json</code>;</li>\n<li>Création du fichier <code>CHANGELOG.md</code>;</li>\n<li>Commit des fichiers <code>package.json</code>, <code>package-lock.json</code> et <code>CHANGELOG.md;</code></li>\n<li>Création du tag de version.</li>\n</ul>\n<p>Nous pouvons maintenant push notre projet sur son dépôt git ou sur <a href=\"https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry\" target=\"_blank\" rel=\"noopener noreferrer\">npm<OutboundLink/></a>.</p>\n<p>Vous pouvez également utiliser la librairie <a href=\"https://github.com/semantic-release/semantic-release\" target=\"_blank\" rel=\"noopener noreferrer\"><code>semantic-release</code><OutboundLink/></a> si vous souhaitez intégrer cette automatisation à vos outils d'intégration continue.</p>\n</div>\n",null]}